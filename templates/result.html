{% extends "base.html" %}

{% block content %}

<!--
    Result dictionary passed to this template:
        result = {
        'city': city,
        'country': country,
        'month': month,
        'month_name': month_name,
        'year': year,
        'holidays': holidays_list,
        'weather': weather_data,
        'webcams': webcam_urls
        }
-->

<h2 id="result-title">Results for {{ result['city'] }}, {{ result['country'] }} in {{ result['month'] }}/{{ result['year'] }}.</h2>

<div class="add-to-faves">
    <form action="favorite/add" method="POST">
        <button type="submit" name="result" value="{{result['city']}}\{{result['country']}}\{{result['month']}}\{{result['year']}}\{{result['webcams']}}\{{result['weather']}}\{{result['holidays']}}">Add to Favorites</button>
    </form>   
</div>

<div id="weather" class="content-box">

    <span class="section-title">Weather</span>
    {% if result['weather'] %}
        <h3>Weather for {{ result['country'] }} during {{ result['month_name'] }}:</h3>
        <p><i>Based on historic climate data in {{ result['month_name'] }} from previous years.</i></p>

            <ul>
                <li>Rainfall: {{ result['weather']['rain'] }} per month.</li>
                <li>Daylight Hours: {{ result['weather']['sunshine'] }} per day.</li>
                <li>High Temp: {{ result['weather']['high_temp'] }}</li>
                <li>Low Temp: {{ result['weather']['low_temp'] }}</li>
            </ul>

    {% else %}
        <!-- Display a message indicating no climate data was found from the API -->
        <h3>No weather data found for {{ result['country'] }} during {{ result['month_name'] }}.</h3>
    
    {% endif %}

</div>
 
<div id="holidays" class="content-box">

    <span class="section-title">Holidays</span>
    {% if result['holidays'] %}
        <!-- Display a list of holiday names, date of holiday, holiday descriptions. -->
        <h3>Holidays in {{ result['country'] }} during {{ result['month_name'] }}:</h3>
        {% for holiday in result['holidays'] %}
        <p>{{ holiday['holiday_name'] }}</p>
        <ul>
            <li>{{ holiday['date'] }}</li>
            <li>{{ holiday['description'] }}</li>
        </ul>
        <br>
        {% endfor %}

    {% else %}
        <!-- Display a message indicating no holidays were found from the API -->
        <h3>No holidays found for {{ result['country'] }} during {{ result['month_name'] }}.</h3>

    {% endif %}

</div>

<div id="webcam" class="content-box">

    <span class="section-title">Images</span>
    {% if result['webcams'] %}
        <!-- Display webcam images using webcam image urls. -->
        {% for webcam_url in result['webcams'] %}
        <img url="{{ webcam_url }}" />
        <span id="windy-credits">Webcams provided by <a href="https://www.windy.com/" target="_blank">windy.com</a> &mdash; <a href="https://www.windy.com/webcams/add" target="_blank">add a webcam</a></span>
        <br>
        {% endfor %}

    {% else %}
        <!-- Display a message indicating no webcams were found from the API -->
        <h3>No webcams were found for {{ result['country'] }}. Try selecting a different category.</h3>
    {% endif %}
</div>

{% endblock %}